<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ZCL Advanced Platform (ZAP) Tool for Matter &mdash; Matter 2.1.0-1.1 2.1.0-1.1 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/tabs.css" type="text/css" />
      <link rel="stylesheet" href="../_static/custom_styles.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Using Wireshark to Capture Network Traffic in Matter" href="WIRESHARK.html" />
    <link rel="prev" title="Matter Intermittently Connected Devices (ICD)" href="MATTER_ICD.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: dark blue" >

          
          
          <a href="../index.html" class="icon icon-home">
            Matter 2.1.0-1.1
              <img src="../_static/logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                2.1.0-1.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../OVERVIEW.html">Silicon Labs Matter User’s Guide Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../NEW_FEATURES.html">Silicon Labs Matter New Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nav_1_overview.html">Matter Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nav_2_prereq.html">Matter Development Prerequisites</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nav_4_thread.html">Matter Over Thread</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nav_5_wifi.html">Matter Over Wi-Fi</a></li>
<li class="toctree-l1"><a class="reference internal" href="../unify/index.html">Unify Matter Bridge</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev/vscode/index.html">VS Code Development</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../nav_3_general.html">Developer Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="CODE_SIZE_SAVINGS.html">Code Savings Guide for Matter Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="COMMIT_HASHES.html">Matter Repositories and Commit Hashes</a></li>
<li class="toctree-l2"><a class="reference internal" href="CUSTOM_MATTER_DEVICE.html">Custom Matter Device Development</a></li>
<li class="toctree-l2"><a class="reference internal" href="FIND_RASPI.html">How to find your Raspberry Pi on the Network</a></li>
<li class="toctree-l2"><a class="reference internal" href="FLASH_SILABS_DEVICE.html">How to Flash a Silicon Labs Device</a></li>
<li class="toctree-l2"><a class="reference internal" href="FLASH_SILABS_SiWx917_SOC_DEVICE.html">How to Flash a SiWx917 SoC Device</a></li>
<li class="toctree-l2"><a class="reference internal" href="MATTER_ICD.html">Matter Intermittently Connected Devices (ICD)</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">ZCL Advanced Platform (ZAP) Tool for Matter</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="#clusters">Clusters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#zap-tool">ZAP Tool</a></li>
<li class="toctree-l3"><a class="reference internal" href="#attributes">Attributes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#commands">Commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="#generation-of-code">Generation of Code</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="WIRESHARK.html">Using Wireshark to Capture Network Traffic in Matter</a></li>
<li class="toctree-l2"><a class="reference internal" href="EP.html">Using Simplicity Studio’s Energy Profiler with Matter</a></li>
<li class="toctree-l2"><a class="reference internal" href="GATT.html">Using Simplicity Studio’s GATT Configurator with Matter</a></li>
<li class="toctree-l2"><a class="reference internal" href="PINTOOL.html">Using Simplicity Studio’s Pintool and Project Configuration with Matter</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../nav_6_faq.html">FAQ</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: dark blue" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Matter 2.1.0-1.1</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../nav_3_general.html">Developer Reference</a></li>
      <li class="breadcrumb-item active">ZCL Advanced Platform (ZAP) Tool for Matter</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/general/ZAP.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="zcl-advanced-platform-zap-tool-for-matter">
<h1>ZCL Advanced Platform (ZAP) Tool for Matter<a class="headerlink" href="#zcl-advanced-platform-zap-tool-for-matter" title="Permalink to this heading"></a></h1>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this heading"></a></h2>
<p>EFR32 example applications provide a baseline demonstration of a lock device,
built using the Matter SDK and the Silicon Labs GeckoSDK. It can be controlled
by a CHIP controller over Openthread network.</p>
<p>The EFR32 device can be commissioned over Bluetooth Low Energy (BLE) where the
device and the CHIP controller will exchange security information with the
Rendez-vous procedure. Thread Network credentials are provided to the EFR32
device which will then join the network.</p>
<p>The LCD on the Silicon Labs WSTK shows a QR Code containing the needed
commissioning information for the BLE connection and starting the Rendez-vous
procedure.</p>
<p>The lock example is intended to serve both as a means to explore the workings of
CHIP, and a template for creating real products on the Silicon Labs platform.</p>
<p>Each Matter application consists of the following layers:</p>
<ul class="simple">
<li><p>Matter SDK: Source code necessary to communicate through the Matter network
over Thread or Wi-Fi</p></li>
<li><p>Data model layer in the form of clusters. There are two types of clusters:</p>
<ul>
<li><p>Utility Clusters:</p>
<ul>
<li><p>They represent common management and diagnostic features of a Matter
endpoint</p></li>
<li><p>Identify cluster is an example of a Utility Cluster. Given a Node
ID, it can be used to Blink LED0 to the corresponding Silicon Labs
WSTK</p></li>
</ul>
</li>
<li><p>Application Clusters:</p>
<ul>
<li><p>These clusters represent functionalities specific to a given
application</p></li>
<li><p>Door Lock Cluster is an example of an Application specific cluster.
This cluster contains commands to lock and unlock a door(door-lock
is represented by an LED), with options to set passwords and lock
schedules</p></li>
</ul>
</li>
</ul>
</li>
</ul>
<br>
</section>
<section id="clusters">
<h2>Clusters<a class="headerlink" href="#clusters" title="Permalink to this heading"></a></h2>
<p>Every Matter Application uses multiple clusters leveraged from the Zigbee
Cluster Library(ZCL). A cluster can be seen as a building block for the Data
Model of a Matter application. Clusters contains attributes, commands, and
events. Attributes are customizable variables specified by the Zigbee Advanced
Platform(ZAP) tool. Commands are sent to the application, which may respond with
data, LED flickering, lock actuation, etc. Events are notifications sent out by
the server.</p>
<p>An application can have multiple Matter endpoints. Application endpoints
generally refer to one device, and inherits its information from the “cluster”
it belongs to. Utility clusters are required to be on the endpoint with ID 0.
Application clusters are assigned to endpoints with IDs 1 and higher.</p>
<p>Some applications have callbacks that are left to be implemented by the device
manufacturer. For example, the storage and management of users and credentials in
the lock-app is left up to the application developer.</p>
</section>
<section id="zap-tool">
<h2>ZAP Tool<a class="headerlink" href="#zap-tool" title="Permalink to this heading"></a></h2>
<p>The ZAP tool is built and maintained by Silicon Labs and developers in the ZAP
opensource community. It inherits its name and features from the Zigbee Cluster
Library, which was the starting point for the Matter data model. ZAP is used for
generating code for Matter applications based on the Zigbee Cluster Library and
associated Matter code templates.</p>
<p>The ZAP tool is no longer present as a submodule in the Matter repo. The ZAP tool
can be downloaded as a binary from GitHub or optionally you can clone the entire ZAP
repo and build the ZAP binary from scratch.</p>
<p>ZAP binaries can be downloaded from the latest ZAP release here:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">https://github.com/project-chip/zap/releases/latest</span></code></p>
</div></blockquote>
<p>Optionally, the ZAP tool can be cloned using the following git command. This will create a
root level zap folder in your current directory.</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">git</span> <span class="pre">clone</span> <span class="pre">https://github.com/project-chip/zap.git</span></code></p>
</div></blockquote>
<p>The ZAP tool can be invoked using the <code class="docutils literal notranslate"><span class="pre">run_zaptool.sh</span></code> script located in the Matter repo at
<code class="docutils literal notranslate"><span class="pre">./scripts/tools/zap/run_zaptool.sh</span></code>. Before you run this script you have to provide the location of the ZAP instance to be run. This is either the binary that you downloaded or
the binary that you built from scratch in the ZAP repo. You can do this by setting the <code class="docutils literal notranslate"><span class="pre">ZAP_INSTALL_PATH</span></code> environment variable
like this:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">export</span> <span class="pre">ZAP_INSTALL_PATH=(path</span> <span class="pre">to</span> <span class="pre">your</span> <span class="pre">instance</span> <span class="pre">of</span> <span class="pre">the</span> <span class="pre">ZAP</span> <span class="pre">binary)</span></code></p>
</div></blockquote>
<p>The <code class="docutils literal notranslate"><span class="pre">run_zaptool.sh</span></code> script can be invoked without arguments, or, you can
provide the path to a ZAP file to be opened upon launch.</p>
<p>In the following examples, the ZAP file for the lock-app has been chosen.</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">./scripts/tools/zap/run_zaptool.sh</span> <span class="pre">($PATH_TO_ZAP_FILE)</span></code></p>
</div></blockquote>
<p>ZAP files for the various sample applications are included in the sample applications <code class="docutils literal notranslate"><span class="pre">data_model</span></code> directory such as</p>
<p><code class="docutils literal notranslate"><span class="pre">./examples/lighting-app/silabs/efr32/data_model/lighting-thread-app.zap</span></code>.</p>
<p>This shows the output of the run_zaptool script with no arguments. To load a new
zap file, click the application menu for Electron (Upper left corner of the
screen for macs), then click “Open File”. Then navigate to the desired .zap
file.</p>
<p><img alt="ZAP Introduction Page" src="../_images/zap_intro.png" /></p>
<p>This shows the output of the run_zaptool script with a zap file given as an
argument, or after a .zap file has been opened in the ZAP UI. An Electron
application will open, pre-loaded with the information from the .zap file
provided as a command line argument.</p>
<p><img alt="ZAP Endpoint" src="../_images/zap_endpoint.png" /></p>
<p>The Out of the box(OOB) example lock application has 2 endpoints. Endpoint 0 is
called the root node. It contains all Service and Device management clusters. In
general, any cluster or feature that is not specific to a device type belongs in
Endpoint 0. Examples of clusters one might find in Endpoint 0: Device Descriptor
cluster, Network Diagnostics cluster.</p>
<p>Endpoint 1 contains information specific to the device type. Conveniently, the
ZAP tool offers a Door lock cluster, which contains Commands(lock, unlock, set
credential, etc…) and Attributes(Lock state, Require PIN) that a standard door
lock application might use.</p>
<p>More endpoints can be added. Each endpoint acts like a port on a network
interface.</p>
<p>Endpoints contain clusters which are bundles of device functionality. Clusters
have both a Client and a Server interface. In general the Client interface sends
commands and the Server interface receives them. For instance a Light would
implement the Server side of the on/off clusters. A Switch would implement the
Client side of the same cluster.</p>
<p>Click on Endpoint 1 on the left hand side of the application. The door lock
cluster should already be enabled as “Server”.</p>
<p><img alt="ZAP Endpoint 1" src="../_images/zap_endpoint_1.png" /></p>
<br>
</section>
<section id="attributes">
<h2>Attributes<a class="headerlink" href="#attributes" title="Permalink to this heading"></a></h2>
<p>Attributes are analogous to member variables of a class. Each attribute is
provided with generated setter/getter code from the ZAP tool. They can be
enabled or disabled for each cluster on a Matter endpoint. Some attributes are
required to be enabled, else the application will not function properly. There
is an option to add attributes to either the server code or client code. The ZAP
tool also allows you choose a storage space for attributes. Attributes can be
stored in standard RAM, Non-volatile memory or external memory. Each attribute
has a type, some are standard C types and some have specially defined enums.
Each attribute can be provided with a default starting value value.</p>
<p>Click the settings wheel to enable/disable, choose a storage option, and choose
a default value for attributes, commands and events for Endpoint 1.</p>
<p><img alt="ZAP Attributes" src="../_images/zap_attributes.png" /></p>
<br>
</section>
<section id="commands">
<h2>Commands<a class="headerlink" href="#commands" title="Permalink to this heading"></a></h2>
<p>Commands can be enabled/disabled like attributes. Some commands are required for
an application to function properly. Many of the functions run when a command is
received are implemented on the server side. But some of these are left up to
the application to define. In the EFR32 lock example, the set/get user and
credential functions are customizable as each implementation of a lock might
store these differently.</p>
<p><img alt="ZAP Commands" src="../_images/zap_commands.png" /></p>
<br>
</section>
<section id="generation-of-code">
<h2>Generation of Code<a class="headerlink" href="#generation-of-code" title="Permalink to this heading"></a></h2>
<p>Once you have chosen the cluster options, save the current ZAP configuration using the application menu in the upper left corner.</p>
<p>Before v1.1.0-1.1 you needed to click the Generate button to generate code. Now, code is generated automatically in the save function. You will be prompted to choose a save location for the generated ZAP code. In the Silicon Labs Matter repository, the lock-app generated files belong in
matter/zzz_generated/lock-app/zap-generated .</p>
</section>
</section>


           </div>
          </div>
          <footer>
    <hr/>
    <p>Copyright © 2023 Silicon Laboratories. All rights reserved.</p>
</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <!-- Theme Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-XXXXXXXXXX', {
          'anonymize_ip': false,
      });
    </script> 

</body>
</html>